<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Álbum Familiar</title>

<style>
    body {
        font-family: "Segoe UI", Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f6f5f2;
        color: #333;
    }

    header {
        background: linear-gradient(135deg, #2b2b2b, #444);
        color: #fff;
        text-align: center;
        padding: 30px 15px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    }

    header h1 {
        margin: 0;
        font-size: 2.1rem;
        letter-spacing: .5px;
    }

    header p {
        margin: 8px 0 0;
        font-size: 1rem;
        opacity: 0.95;
    }

    .intro {
        max-width: 880px;
        margin: 22px auto;
        padding: 0 24px;
        font-size: 1.02rem;
        color: #4a4a48;
        text-align: center;
        line-height: 1.7;
    }

    .intro strong { color: #2b2b2b; }

    .videos-section {
        padding: 18px;
        margin-top: 6px;
    }

    .videos-section h2 {
        margin: 0 0 12px 5px;
        font-size: 1.25rem;
        color: #2b2b2b;
    }

    .video-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 12px;
    }

    .video-grid video {
        width: 100%;
        height: 160px;
        border-radius: 10px;
        object-fit: cover;
        box-shadow: 0 3px 8px rgba(0,0,0,0.12);
        cursor: pointer;
        transition: transform 0.28s;
    }

    .video-grid video:hover { transform: translateY(-4px); }

    .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 12px;
        padding: 18px;
        margin-top: 14px;
    }

    .gallery-item img {
        width: 100%;
        height: 185px;
        object-fit: cover;
        border-radius: 10px;
        transition: transform .25s, box-shadow .25s;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0,0,0,0.10);
    }

    .gallery-item:hover img {
        transform: scale(1.04);
        box-shadow: 0 6px 18px rgba(0,0,0,0.18);
    }

    .lightbox {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.86);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 999;
        padding: 20px;
    }

    .lightbox-content {
        max-width: 92%;
        max-height: 88%;
    }

    .lightbox-content video,
    .lightbox-content img {
        width: 100%;
        height: auto;
        border-radius: 10px;
    }

    .lightbox .close {
        position: absolute;
        top: 18px;
        right: 28px;
        color: #fff;
        font-size: 42px;
        cursor: pointer;
    }

    footer {
        text-align: center;
        padding: 18px;
        background: #fbf9f7;
        color: #6d6a67;
        font-size: 0.95rem;
        border-top: 1px solid #e9e6e3;
    }
</style>
</head>

<body>

<header>
    <h1>Álbum Familiar</h1>
    <p>Un lugar para guardar lo que importa</p>
</header>

<!-- VIDEOS (se muestran primero) -->
<div class="videos-section">
    <h2>Videos</h2>
    <div class="video-grid" id="video-grid"></div>
</div>

<!-- IMÁGENES -->
<div class="gallery" id="gallery"></div>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="close" onclick="closeLightbox()">&times;</div>
    <div class="lightbox-content" id="lightbox-content"></div>
</div>

<script>
/* --- CONFIG --- */
const repoUser = "KATO250712";
const repoName = "AlbumFamiliar";
/* carpetas en el repo */
const videosFolder = "videos";
const imagesFolder = "imagenes";

/* --- CARGA DE VIDEOS --- */
async function loadVideos() {
    try {
        const api = `https://api.github.com/repos/${repoUser}/${repoName}/contents/${videosFolder}`;
        const res = await fetch(api);
        if (!res.ok) return;
        const files = await res.json();
        const grid = document.getElementById("video-grid");

        files.forEach(file => {
            if (file.name.match(/\.(mp4|webm|mov)$/i)) {
                const v = document.createElement("video");
                v.src = file.download_url;
                v.autoplay = true;
                v.muted = true;
                v.loop = true;
                v.playsInline = true;
                v.setAttribute("aria-label", file.name);
                v.onclick = () => openLightbox("video", file.download_url);
                grid.appendChild(v);
            }
        });
    } catch (e) {
        console.warn("No se pudieron cargar los videos.", e);
    }
}

/* --- CARGA DE IMÁGENES --- */
async function loadImages() {
    try {
        const api = `https://api.github.com/repos/${repoUser}/${repoName}/contents/${imagesFolder}`;
        const res = await fetch(api);
        if (!res.ok) return;
        const files = await res.json();
        const gallery = document.getElementById("gallery");

        files.forEach(file => {
            if (file.name.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                const item = document.createElement("div");
                item.className = "gallery-item";
                const img = document.createElement("img");
                img.src = file.download_url;
                img.alt = file.name;
                img.onclick = () => openLightbox("img", file.download_url);
                item.appendChild(img);
                gallery.appendChild(item);
            }
        });
    } catch (e) {
        console.warn("No se pudieron cargar las imágenes.", e);
    }
}

/* --- LIGHTBOX --- */
function openLightbox(type, src) {
    const content = document.getElementById("lightbox-content");
    content.innerHTML = type === "img"
        ? `<img src="${src}" alt="">`
        : `<video src="${src}" controls autoplay></video>`;
    const lb = document.getElementById("lightbox");
    lb.style.display = "flex";
    lb.setAttribute("aria-hidden", "false");
}

function closeLightbox() {
    const lb = document.getElementById("lightbox");
    lb.style.display = "none";
    lb.setAttribute("aria-hidden", "true");
    document.getElementById("lightbox-content").innerHTML = "";
}

/* --- INICIALIZAR --- */
loadVideos();
loadImages();
</script>

<footer>
    Guardado con respeto y paz — para Miguel, con cariño.
</footer>

</body>
</html>
